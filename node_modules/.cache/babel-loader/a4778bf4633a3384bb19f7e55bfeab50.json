{"ast":null,"code":"import _objectSpread from \"/home/bahachammakhi/Projects/ecommerce-shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nvar _jsxFileName = \"/home/bahachammakhi/Projects/ecommerce-shop/src/App.js\";\nimport React, { Component } from \"react\";\nimport Products from \"./componenets/Products\";\nimport Filter from \"./componenets/Filter\";\nimport Basket from \"./componenets/Basket\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAddToCart = (e, product) => {\n      this.setState(state => {\n        const cartItems = state.cartItems;\n        let productAlreadyInCart = false;\n        cartItems.forEach(item => {\n          if (item.id === product.id) {\n            productAlreadyInCart = true;\n            item.count++;\n          }\n        });\n\n        if (!productAlreadyInCart) {\n          cartItems.push(_objectSpread({}, product, {\n            count: 1\n          }));\n        }\n\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return cartItems;\n      });\n    };\n\n    this.handleRemoveFromCart = (e, item) => {\n      this.setState(state => {\n        const cartItems = state.cartItems.filter(elem => elem.id != item.id);\n        localStorage.removeItem(\"cartItem\", cartItems);\n        return {\n          cartItems\n        };\n      });\n    };\n\n    this.state = {\n      products: [],\n      filteredProducts: [],\n      cartItems: []\n    };\n  }\n\n  componentWillMount() {\n    fetch(\"http://localhost:8000/products/\").then(res => res.json()).then(data => this.setState({\n      products: data,\n      filteredProducts: data,\n      cartItems: []\n    }));\n\n    if (localStorage.getItem(\"cartItems\")) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(Provider, {\n      store: store,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Ecommmerce test \"), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(Filter, {\n      size: this.state.size,\n      sort: this.state.sort,\n      handleChangeSize: this.handleChangeSize,\n      handleChangeSort: this.handleChangeSort,\n      count: this.state.filteredProducts.length,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }), React.createElement(Products, {\n      products: this.state.filteredProducts,\n      handleAddToCart: this.handleAddToCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(Basket, {\n      cartItems: this.state.cartItems,\n      handleRemoveFromCart: this.handleRemoveFromCart,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })))));\n  }\n\n}","map":{"version":3,"sources":["/home/bahachammakhi/Projects/ecommerce-shop/src/App.js"],"names":["React","Component","Products","Filter","Basket","App","constructor","props","handleAddToCart","e","product","setState","state","cartItems","productAlreadyInCart","forEach","item","id","count","push","localStorage","setItem","JSON","stringify","handleRemoveFromCart","filter","elem","removeItem","products","filteredProducts","componentWillMount","fetch","then","res","json","data","getItem","parse","render","store","size","sort","handleChangeSize","handleChangeSort","length"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Products from \"./componenets/Products\";\nimport Filter from \"./componenets/Filter\";\nimport Basket from \"./componenets/Basket\";\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      products: [],\n      filteredProducts: [],\n      cartItems: []\n    };\n  }\n  componentWillMount() {\n    fetch(\"http://localhost:8000/products/\")\n      .then(res => res.json())\n      .then(data =>\n        this.setState({\n          products: data,\n          filteredProducts: data,\n          cartItems: []\n        })\n      );\n    if (localStorage.getItem(\"cartItems\")) {\n      this.setState({\n        cartItems: JSON.parse(localStorage.getItem(\"cartItems\"))\n      });\n    }\n  }\n  handleAddToCart = (e, product) => {\n    this.setState(state => {\n      const cartItems = state.cartItems;\n      let productAlreadyInCart = false;\n      cartItems.forEach(item => {\n        if (item.id === product.id) {\n          productAlreadyInCart = true;\n          item.count++;\n        }\n      });\n      if (!productAlreadyInCart) {\n        cartItems.push({ ...product, count: 1 });\n      }\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return cartItems;\n    });\n  };\n  handleRemoveFromCart = (e, item) => {\n    this.setState(state => {\n      const cartItems = state.cartItems.filter(elem => elem.id != item.id);\n      localStorage.removeItem(\"cartItem\", cartItems);\n      return { cartItems };\n    });\n  };\n  render() {\n    return (\n      <Provider store={store}>\n      <div className=\"container\">\n        <h1>Ecommmerce test </h1>\n        <hr />\n        <div className=\"row\">\n          <div className=\"col-md-8\">\n            <Filter\n              size={this.state.size}\n              sort={this.state.sort}\n              handleChangeSize={this.handleChangeSize}\n              handleChangeSort={this.handleChangeSort}\n              count={this.state.filteredProducts.length}\n            />\n            <hr />\n            <Products\n              products={this.state.filteredProducts}\n              handleAddToCart={this.handleAddToCart}\n            />\n          </div>\n          <div className=\"col-md-4\">\n            <Basket\n              cartItems={this.state.cartItems}\n              handleRemoveFromCart={this.handleRemoveFromCart}\n            />\n          </div>\n        </div>\n      </div>\n      </Provider>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}